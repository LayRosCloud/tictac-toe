# Проект "Крестики-Нолики"
Проект представляет собой реализацию архитектурного решения для задачи многопользовательской системы в игру "Крестики-нолики" с запоминанием каждого хода каждого игрока.

## Архитектура базы данных
База данных автоматически создается при запуске проекта (не через миграции) в СУБД PostgreSQL. Состоит из 4 таблиц: 
- **users** - в которой хранятся имена всех игроков, которые играли в игру.
- **games** - вся информация о настройке игры (размер поля, размер выигрышной линии, сколько ходов было сделано в игре, дата создания, дата окончания игры)
- **participants** - все участники в играх хранятся в этой таблице, их используемый символ ('x' или 'o'), которые они будут ставить на поле и статус участника, проиграл, выиграл, сыграл в ничью или ещё находится в игре.
- **stages** - все ходы в играх находятся в этой таблице, участник (participant) ставит ход в определенную координату и тем самым фиксируется результат.

## Архитектура проекта
Проект разделен на слои:
- Сущности (**entities**) представляет собой модель таблицу;
- Паттерн репозиторий (**repositories**) - даже за свой статус антипаттерн, так как он перенасыщает логикой и ответственностью класс удобен тем, что обращение создания, поиска и работу с моделью базы данных мы полностью полагаем на репозиторий.
- **Сервисы** - вся бизнес-логика, правила и условия полагаем на сервисы.
- **DTO** - ещё один паттерн, data transfer object - объект передачи данных, позволяет формировать объекты с лишь необходимыми полями при передачи данных как в запросе так и в ответе.
- **Mapper** мапперы, логика преобразования dto в entity и обратно, чтобы в сервисе оставалась лишь бизнес-логика, и он не был перегружен.
- **Utils** - классы которые выносят часто повторяемую логику, используются как утилиты.
- **Controllers** - контроллеры, классы, которые общаются с клиентом (пользователем) обрабатывают входящие и выходящие данные.

## Конечные точки

Приложение открывается на порту 8080
по пути /swagger можно открыть документацию для publish версии (сделано для тестирования тестовой задачи)
для большинства endpoints сделано версия ендпоинта (/v1/) - это одно из правил REST служит для того, чтобы не допустить проблем при критических обновлениях.
### Game Controller
GET /health (по техническому заданию) выдает статус 200
GET /v1/games?limit=T&page=T - выдает через пагинацию некоторое количество игр.
POST /v1/games/invite - если вдруг второй игрок может вступить сам в игру дав некоторые данные
POST /v1/games/ - создай свою игру (лобби), чтобы поиграть!

### Stage Controller

POST /v1/stages/moves - игрок делает ход, автоматически просчитывается выигрышный ли это ход, не поставил ли он в одну и ту же клетку (возвращает такой же объект, если он захотел поставить, с 10% шансом на 3 ходу игры ставится символ противника)
